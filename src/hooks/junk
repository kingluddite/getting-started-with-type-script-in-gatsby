import React from 'react';
import { renderHook } from '@testing-library/react-hooks';
import { useStaticQuery } from 'gatsby';
import { useSiteMetadata } from './use-site-metadata';

jest.mock(`gatsby`, () => ({
  graphql: jest.fn(),
  useStaticQuery: jest.fn(),
}));

describe(`useSiteMetadata`, () => {
  test(`returns site metadata`, () => {
    const mockData = {
      site: {
        siteMetadata: {
          title: `Sample Title`,
          description: `Sample Description`,
          twitterUsername: `sample_twitter`,
          siteUrl: `https://example.com`,
        },
      },
    };

    useStaticQuery.mockReturnValueOnce(mockData);

    const { result } = renderHook(() => useSiteMetadata());

    expect(result.current.title).toBe(`Sample Title`);
    expect(result.current.description).toBe(`Sample Description`);
    expect(result.current.twitterUsername).toBe(`sample_twitter`);
    expect(result.current.siteUrl).toBe(`https://example.com`);
  });
});
